{"version":3,"sources":["webpack:///./src/components/hourglass.js","webpack:///./src/misc/countdown.js","webpack:///./config/theme.json"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB;AACA;AACO;;AAEP;AACA;AACA,aAAa,GAAG;AAChB,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB;AACA,sCAAsC,yCAAyC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;AAAA;AAAA;;;;;;;;;;;;;;;;AC3ID;AAAA;AAAA;AAAA;AAAqD;AACH;;AAElD;AACA;AACA;AACA,cAAc,UAAU;AACxB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB,cAAc,gBAAgB;AAC9B;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,gDAAK;AAC1B;AACA,yBAAyB,2EAAS;;;AAGlC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AAAA;AAAA;AACD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;;;;;;;ACjKA,kBAAkB,SAAS,ofAAof,WAAW,iDAAiD,YAAY,qBAAqB,SAAS,kEAAkE,UAAU,+BAA+B,WAAW,YAAY,WAAW,mEAAmE,WAAW,sHAAsH,WAAW,yBAAyB,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,mEAAmE,WAAW,YAAY,WAAW,8BAA8B,WAAW,4GAA4G,WAAW,yCAAyC,gFAAgF,WAAW,mFAAmF,WAAW,sFAAsF,WAAW,yFAAyF,WAAW,iFAAiF,WAAW,qFAAqF,WAAW,2DAA2D,gFAAgF,WAAW,oGAAoG,WAAW,4GAA4G,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,6HAA6H,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,4BAA4B,4CAA4C,EAAE,8CAA8C,EAAE,+CAA+C,EAAE,4CAA4C,EAAE,+CAA+C,EAAE,4CAA4C,EAAE,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,YAAY,WAAW,4BAA4B,6CAA6C,EAAE,+CAA+C,EAAE,6CAA6C,G","file":"6.js","sourcesContent":["const fully = '#66CC33';\r\nconst half = '#FFD400';\r\nconst scanty = '#FF3300';\r\nconst elapsed = '#848484';\r\n\r\n/**\r\n * 砂時計\r\n * Libries: p5\r\n * @property {number} startMillis - 開始タイミング\r\n * @property {number} timeLimit - 制限時間\r\n * @property {number} vh - ディスプレイの高さの1/100\r\n * @property {number} vw - ディスプレイの幅の1/100\r\n * @property {number} short - vhとvwの短い方\r\n * @property {boolean} isStart - スタートボタンが押されたかどうか\r\n *\r\n */\r\nexport class HourGlass {\r\n\r\n  /**\r\n   * 初期表示\r\n   * @param {p5} p\r\n   * @param {number} timeLimit - 制限時間\r\n   * @param {boolean} [isReturnEnable] - 戻るボタンの表示の有無\r\n   */\r\n  constructor(p, timeLimit, option = {isReturnEnable:false, isChangeColor:true}) {\r\n    this.p5 = p;\r\n    this.timeLimit = timeLimit;\r\n    this.option = option;\r\n    let shortView = p.windowHeight > p.windowWidth\r\n      ? 'vw'\r\n      : 'vh';\r\n    this.secGlass = new Date(this.timeLimit + this.startMillis - this.p5.millis());\r\n\r\n    // let div = p.createDiv('');\r\n    // div.id(\"hourglass\")\r\n    //   .style('position', 'fixed')\r\n    //   .style('top','10vw')\r\n    //   // .style('top', '7vw')\r\n    //   .style('left', '7vw')\r\n    //   .style('font-size', '3.5vw')\r\n    //   // .style('background-color', '#fff')\r\n    //   // .style('color', '#616161')\r\n    //   .style('width', '11vw')\r\n    //   .style('height', '11vw')\r\n    //   .style('border-radius', '50%')\r\n    //   .style('display', 'flex')\r\n    //   .style('align-items', 'center')\r\n    //   .style('justify-content', 'center')\r\n    //   .html(\"戻る\")\r\n    // ;\r\n    if (option.isReturnEnable) {\r\n      this.div = p.createButton('戻る')\r\n        .id(\"hourglass\")\r\n        .style('position', 'fixed')\r\n        // .style('top', '10vw')\r\n        .style('top', '4' + shortView)\r\n        .style('left', '4' + shortView)\r\n        .style('font-size', '3.5' + shortView)\r\n        .style('background-color', 'transparent')\r\n        // .style('color', '#616161')\r\n        .style('width', '17' + shortView)\r\n        .style('height', '17' + shortView)\r\n        // .style('border-radius', '50%')\r\n        .style('display', 'flex')\r\n        .style('align-items', 'center')\r\n        .style('justify-content', 'center')\r\n        .style('padding-top', '7' + shortView)\r\n        .style('border-style', 'none')\r\n        .mousePressed(() => {\r\n          if (App.isAndroid) Android.redo();\r\n        })\r\n      ;\r\n    }\r\n    this.isStart = false;\r\n  }\r\n\r\n  /**\r\n   * [p5] トレーニング開始時処理\r\n   */\r\n  start() {\r\n    this.startMillis = this.p5.millis();\r\n    this.p5.loop();\r\n    this.isStart = true;\r\n  }\r\n\r\n  /**\r\n   * [p5] 砂時計を描画\r\n   */\r\n  renderGlass(isVisible = true) {\r\n    this.vh = this.p5.windowHeight / 100;\r\n    this.vw = this.p5.windowWidth / 100;\r\n    this.short = this.p5.min(this.vh, this.vw);\r\n\r\n    // const hourglass = this.p5.select(\"#hourglass\");\r\n    this.secGlass = new Date(this.timeLimit + this.startMillis - this.p5.millis());\r\n    // let nowSec = (\"0\" + this.secGlass.getSeconds()).slice(-2);\r\n    // hourglass.html(\"戻る\");\r\n    /** 外枠部分 */\r\n    this.limitSec = this.timeLimit / 1000 - this.secGlass.getSeconds() - (this.secGlass.getMilliseconds() / 1000);\r\n    if (!isVisible)\r\n      return;\r\n    this.p5.noStroke();\r\n    this.p5.fill(fully);\r\n    if (this.option.isChangeColor && (this.timeLimit / 1000) / 2 > this.secGlass.getSeconds()){\r\n      this.p5.fill(half);\r\n    }\r\n    if (this.option.isChangeColor && (this.timeLimit / 1000) / 4 > this.secGlass.getSeconds()){\r\n      this.p5.fill(scanty);\r\n    }\r\n    this.p5.ellipseMode(this.p5.CORNER);\r\n    this.p5.ellipse(4 * this.short, 4 * this.short, 17 * this.short, 17 * this.short);\r\n    // this.p5.fill('#212121');\r\n    this.p5.fill(elapsed);\r\n    let rad = (360 / (this.timeLimit / 1000)) * this.limitSec * Math.PI / 180;\r\n    let s = -90 * Math.PI / 180;\r\n    if (this.isOver) {\r\n      this.p5.arc(4 * this.short, 4 * this.short, 17 * this.short, 17 * this.short, s, s - 0.001 )\r\n    } else {\r\n      this.p5.arc(4 * this.short, 4 * this.short, 17 * this.short, 17 * this.short, s, s + rad + 0.001);\r\n    }\r\n    // if (!this.isStart){\r\n    //   this.p5.select(\"#hourglass\").html(this.timeLimit / 1000);\r\n    // }\r\n    this.p5.ellipseMode(this.p5.CENTER);\r\n  }\r\n\r\n  /**\r\n   * [p5] タイムオーバー判定\r\n   * @returns {boolean} 経過した：true 経過していない:false\r\n   */\r\n  get isOver() {\r\n    this.endTime = this.p5.millis();\r\n    return (this.p5.millis() > (this.timeLimit + this.startMillis));\r\n  }\r\n\r\n  get limit() {\r\n    return this.secGlass.getSeconds() + (this.secGlass.getMilliseconds() / 1000)\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/hourglass.js\n// module id = 10\n// module chunks = 0 1 2 4 5 6","import {HourGlass} from '../components/hourglass.js';\r\nimport *  as theme from '../../config/theme.json';\r\n\r\n/**\r\n * ベースライン測定\r\n * Libries: p5\r\n * @property {HourGlass} hourglass - 砂時計\r\n * @property {string} message - 表示するメッセージ\r\n * @property {number} alpha - メッセージの透明度\r\n * @property {number} changeTime - メッセージが変更された時間\r\n * @property {number} interval - 次のメッセージに変更するまでの時間\r\n * @property {boolean} isInhaling - 現在のメッセージが「吸う」メッセージであるかどうか\r\n * @property {number} maxWidth - 描画対象とする横幅\r\n * @property {Array:JSON data} theme - カスタマイズテーマ\r\n */\r\nclass Countdown {\r\n\r\n  /**\r\n   * 安静処理\r\n   * @param {String} mode - \"doNF\", \"noNF\"\r\n   * @param {Number} time - 安静時間（秒）\r\n   */\r\n  constructor(p5, mode, time) {\r\n    this.$p5 = p5;\r\n    this.mode = mode;\r\n    this.time = time;\r\n    this.waitingForReady = new Promise((resolve, reject) => {\r\n      this.ready = resolve;\r\n    });\r\n    this.waitingForStopped = new Promise((resolve, reject) => {\r\n      this.stop = resolve;\r\n    });\r\n    this.maxWidth = (p5.windowWidth < p5.windowHeight)\r\n      ? p5.windowWidth\r\n      : p5.pow(p5.windowHeight, 2) / p5.windowWidth;\r\n    this.textSize = this.maxWidth/15;\r\n    this.$p5.theme = theme;\r\n    this.diameter = p5.windowHeight * 0.75;\r\n    this.hourGlass = new HourGlass(this.$p5, time*1000, false);\r\n\r\n\r\n  }\r\n  /* [p5] preload処理 */\r\n  preload() {\r\n    if (this.$p5.theme.font)\r\n      this.font = this.$p5.loadFont(this.$p5.theme.font.path);\r\n  }\r\n\r\n  /* [p5] setup処理 */\r\n  setup() {\r\n    this.$p5.createCanvas(this.$p5.windowWidth, this.$p5.windowHeight);\r\n    this.$p5.background(this.$p5.theme.color.background);\r\n    this.$p5.frameRate(30);\r\n    this.$p5.noLoop();\r\n    this.$p5.isReady = true;\r\n    if (this.$p5.theme.font)\r\n      this.$p5.textFont(this.font);\r\n\r\n    this.timer = this.$p5.createDiv('')\r\n      .style('position', 'fixed')\r\n      .style('font-size', '15vh')\r\n      .style('width', '12vw')\r\n      .style('height', '20vh')\r\n      .style('color', this.$p5.theme.color.primaryText)\r\n      // .style('background', \"#FFFFFF\")\r\n      .style('text-align', 'center')\r\n      .style('margin', 'auto')\r\n      .style('top', '35vh')\r\n      .style('left', '44vw')\r\n      .style('line-height', '20vh')\r\n      .style('text-shadow', 'white 2px 2px 0px')\r\n\r\n    ;\r\n    this.message = this.$p5.createDiv('')\r\n      .style(\"position\", \"fixed\")\r\n      .style(\"font-size\", \"4.5vh\")\r\n      .style('width', '60vw')\r\n      .style('height', '20vh')\r\n      .style(\"color\", this.$p5.theme.color.primaryText)\r\n      // .style(\"background\", \"#FFFFFF\")\r\n      .style(\"left\", \"20vw\")\r\n      .style('text-align', 'center')\r\n      .style('margin', 'auto')\r\n      .style('top', '55vh')\r\n      .style('text-shadow', 'white 1px 1px 0px')\r\n    ;\r\n\r\n    this.ready();\r\n  }\r\n\r\n  /* [p5] スタートボタン押下 */\r\n  start() {\r\n    this.hourGlass.start();\r\n\r\n    switch(this.mode) {\r\n      case \"doNF\":\r\n        this.message.html(\"リラックスして、呼吸の数を数えながら、<br>深い呼吸を続けてください。<br>できるだけ青い色をキープしましょう。\")\r\n        break;\r\n      case \"noNF\":\r\n        this.message.html(\"リラックスして、呼吸の数を数えながら、<br>深い呼吸を続けてください。\")\r\n        break;\r\n    }\r\n  }\r\n\r\n  /* [p5] draw処理 */\r\n  draw() {\r\n    this.$p5.background(this.$p5.theme.color.background);\r\n    if(this.mode===\"doNF\"){\r\n      this.$p5.noCanvas();\r\n      this.$p5.createCanvas(this.$p5.windowWidth,this.$p5.windowHeight);\r\n    }\r\n\r\n    this.position = {\r\n      left: this.$p5.windowWidth / 2,\r\n      top: this.$p5.windowHeight / 2\r\n    };\r\n    this.$p5.textAlign(this.$p5.CENTER);\r\n    if (!this.hourGlass.isOver) {\r\n      this.hourGlass.renderGlass(false);\r\n      if (!isNaN(this.hourGlass.limitSec)) {\r\n        this.timer.html(this.time - Math.floor(this.hourGlass.limitSec))\r\n      }\r\n      return;\r\n    }\r\n    this.$p5.noLoop();\r\n    this.$p5.noCanvas();\r\n    this.$p5.remove();\r\n\r\n    this.stop();\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport class CountdownGuide {\r\n  async start(time) {\r\n    new p5(($p5) => {\r\n      this.training = new Countdown($p5, \"doNF\", time);\r\n      $p5.preload = this.training.preload.bind(this.training);\r\n      $p5.setup = this.training.setup.bind(this.training);\r\n      $p5.draw = this.training.draw.bind(this.training);\r\n    }, \"content\");\r\n    await this.training.waitingForReady;\r\n\r\n    this.training.start();\r\n\r\n    await this.training.waitingForStopped;\r\n    // if (typeof Android !== \"undefined\")\r\n    //   Android.startTraining();\r\n  }\r\n}\r\n// new BaselineGuide().start();\r\n// var x = new XMLHttpRequest();\r\n// x.addEventListener(\"load\", () => {\r\n//   App={\r\n//     theme: JSON.parse(x.responseText)\r\n//   };\r\n// });\r\n// x.open(\"GET\", \"./config/theme.json\");\r\n// x.send();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/misc/countdown.js\n// module id = 6\n// module chunks = 6","module.exports = {\"color\":{\"primary\":\"#ffe600\",\"secondary\":\"#ed7229\",\"positioner\":\"#ffffff\",\"positionerLight\":\"#ffffff\",\"positionerText\":\"#505050\",\"positionerPushedText\":\"#dfdfdf\",\"domKeyOutline\":\"#505050\",\"domKeyText\":\"#505050\",\"domKeyBackground\":\"#ffffff\",\"pushableFlash\":\"#ff0000\",\"insideCircle\":\"#e6e6e6\",\"outsideCircle\":\"#c8c8c8\",\"accent\":\"#37b595\",\"primaryText\":\"#606060\",\"secondaryText\":\"#424242\",\"accentText\":\"#000000\",\"background\":\"#ffffff\",\"empty\":\"#dfdfdf\",\"shadow\":\"#c5c5c6\",\"circles\":\"#ed7769\",\"crosses\":\"#22587a\"},\"option\":{\"vibe\":\"off\",\"sound\":\"on\",\"isReturnEnable\":false},\"tengrid\":{\"borderRadius\":\"0px\"},\"font\":{\"family\":\"LocalFont\",\"path\":\"./assets/font/mplus-1p-regular.woff\"},\"pulse\":{\"images\":null,\"ballImage\":null},\"NFB001\":{\"level\":\"2\"},\"NFB002\":{\"level\":\"2\",\"symbolList\":[\"〇\",\"☆\",\"▽\",\"■\",\"◇\",\"×\",\"△\",\"※\",\"◎\",\"□\"]},\"NFB003\":{\"level\":\"2\",\"pushList\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"]]},\"NFB004\":{\"level\":\"3\",\"marker\":\"●\"},\"NFB005\":{\"level\":\"4\"},\"NFB006\":{\"level\":\"4\"},\"NFB007\":{\"level\":\"1\"},\"NFB008\":{\"level\":\"1\",\"symbolList\":[\"〇\",\"☆\",\"▽\",\"■\",\"◇\",\"×\",\"△\",\"※\",\"◎\",\"□\"]},\"NFB009\":{\"level\":\"1\"},\"NFB010\":{\"level\":\"3\",\"threshold\":\"500\"},\"NFB011\":{\"level\":\"2\",\"threshold\":\"500\",\"isUseImage\":true,\"iconfont\":\"tag_faces\",\"imagePath\":\"assets/image/face1.png\"},\"NFB012\":{\"level\":\"1\",\"isUseImage\":false,\"image1\":{\"iconfont\":\"tag_faces\",\"imagePath\":\"./assets/image/push1.png\",\"isPositive\":true},\"image2\":{\"iconfont\":\"tag_faces\",\"imagePath\":\"./assets/image/unpush1.png\",\"isPositive\":false},\"image3\":{\"iconfont\":\"brightness_high\",\"imagePath\":\"./assets/image/push2.png\",\"isPositive\":true},\"image4\":{\"iconfont\":\"brightness_high\",\"imagePath\":\"./assets/image/unpush2.png\",\"isPositive\":false},\"image5\":{\"iconfont\":\"bug_report\",\"imagePath\":\"./assets/image/push3.png\",\"isPositive\":true},\"image6\":{\"iconfont\":\"bug_report\",\"imagePath\":\"./assets/image/unpush3.png\",\"isPositive\":false}},\"NFB013\":{\"level\":\"1\",\"threshold\":\"1000\",\"isUseImage\":true,\"image1\":{\"iconfont\":\"tag_faces\",\"imagePath\":\"./assets/image/face1.png\",\"isPositive\":true},\"image2\":{\"iconfont\":\"sentiment_very_dissatisfied\",\"imagePath\":\"./assets/image/face2.png\",\"isPositive\":false}},\"NFB014\":{\"level\":\"1\",\"pushList\":[[\"1\",\"あ\",\"2\",\"い\",\"3\",\"う\",\"4\",\"え\",\"5\",\"お\",\"6\",\"か\",\"7\",\"き\",\"8\",\"く\",\"9\",\"け\",\"10\",\"こ\"]]},\"NFB015\":{\"level\":\"1\"},\"NFB016\":{\"level\":\"1\"},\"NFB017\":{\"level\":\"1\"},\"NFB018\":{\"level\":\"1\",\"threshold\":\"1000\",\"isUseImage\":false,\"iconfont\":\"star\",\"imagePath\":\"./assets/image/face1.png\",\"isPositive\":true},\"NFB019\":{\"level\":\"1\"},\"NFB020\":{\"level\":\"1\"},\"NFB021\":{\"level\":\"1\"},\"NFB022\":{\"level\":\"1\"},\"NFB023\":{\"level\":\"1\",\"flowingList\":[{\"name\":\"犬\",\"image\":\"./assets/image/dog.png\"},{\"name\":\"馬\",\"image\":\"./assets/image/horse.png\"},{\"name\":\"猿\",\"image\":\"./assets/image/monkey.png\"},{\"name\":\"猫\",\"image\":\"./assets/image/cat.png\"},{\"name\":\"兎\",\"image\":\"./assets/image/rabbit.png\"},{\"name\":\"鼠\",\"image\":\"./assets/image/rat.png\"}]},\"NFB024\":{\"level\":\"1\"},\"NFB025\":{\"level\":\"1\"},\"NFB026\":{\"level\":\"1\"},\"NFB027\":{\"level\":\"1\"},\"NFB028\":{\"level\":\"1\"},\"NFB029\":{\"level\":\"1\"},\"NFB030\":{\"level\":\"1\",\"flowingList\":[{\"name\":\"いぬ\",\"image\":\"./assets/image/dog.png\"},{\"name\":\"うま\",\"image\":\"./assets/image/horse.png\"},{\"name\":\"ねこ\",\"image\":\"./assets/image/cat.png\"}]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/theme.json\n// module id = 9\n// module chunks = 0 1 2 4 5 6"],"sourceRoot":""}